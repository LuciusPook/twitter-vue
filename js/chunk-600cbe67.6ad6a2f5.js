(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-600cbe67"],{"0fc1":function(e,t,s){},"5b4c":function(e,t,s){e.exports=s.p+"img/Icon@ac-icon.e091133e.svg"},6379:function(e,t,s){e.exports=s.p+"img/Vector_user-icon.dccc246f.svg"},"6ecc":function(e,t,s){},"7b7b":function(e,t,s){e.exports=s.p+"img/Vector_cogsetting-action.df6893fe.svg"},"83b4":function(e,t,s){e.exports=s.p+"img/Vector_home-icon.1b470f8d.svg"},8934:function(e,t,s){"use strict";s("0fc1")},"8d18":function(e,t,s){e.exports=s.p+"img/Vector_close-icon.b2953a4a.svg"},a581:function(e,t,s){e.exports=s.p+"img/Vector_home-action.e4bc107f.svg"},b5f1:function(e,t,s){e.exports=s.p+"img/Vector_user-action.eb2a2af0.svg"},bb51:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"home"},[s("Navbar",{on:{"show-create-modal":e.toggleCreateTweetModal}}),s("router-view"),e.isEditingCreateModal?s("NewPostModal",{attrs:{checked:e.checked,"is-processing":e.isProcessing},on:{afterSubmit:e.createNewTweet,"close-btn-clicked":e.toggleCreateTweetModal,checkedMsg:e.checkedMsg}}):e._e()],1)},r=[],a=s("1da1"),n=(s("a4d3"),s("e01a"),s("96cf"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"menu"},[i("div",{staticClass:"navbar"},[i("a",[i("img",{staticClass:"logo",attrs:{src:s("5b4c"),alt:"Logo"},on:{click:function(t){return e.redirectMainPage(e.currentUser.role)}}})]),i("div",{staticClass:"navbar-options"},[i("div",{staticClass:"navbar-list"},["admin"!==e.currentUser.role?[i("div",{class:["navbar-item","page-item",{active:"main"===e.currentPage}],on:{click:function(t){return e.switchCurrentDisply("main")}}},[i("router-link",{attrs:{to:"/main"}},["main"===e.currentPage?i("img",{attrs:{src:s("a581"),alt:"main"}}):i("img",{attrs:{src:s("83b4"),alt:"main-unselected"}}),e._v(" 首頁 ")])],1),i("div",{class:["navbar-item","page-item",{active:"profile"===e.currentPage}],on:{click:function(t){return e.switchCurrentDisply("profile")}}},[i("router-link",{attrs:{to:{name:"user",params:{id:e.currentUser.id}}}},["profile"===e.currentPage?i("img",{attrs:{src:s("b5f1"),alt:"user-info"}}):i("img",{attrs:{src:s("6379"),alt:"user-info-unselected"}}),e._v(" 個人資料 ")])],1),i("div",{class:["navbar-item","page-item",{active:"setting"===e.currentPage}],on:{click:function(t){return e.switchCurrentDisply("setting")}}},[i("router-link",{attrs:{to:{name:"setting"}}},["setting"===e.currentPage?i("img",{attrs:{src:s("7b7b"),alt:"cogsetting"}}):i("img",{attrs:{src:s("fadf"),alt:"cogsetting-unselected"}}),e._v(" 設定 ")])],1)]:[i("div",{class:["navbar-item","page-item",{active:"tweets"===e.currentPage}],on:{click:function(t){return e.switchCurrentDisply("tweets")}}},[i("router-link",{attrs:{to:"/admin/tweets"}},["tweets"===e.currentPage?i("img",{attrs:{src:s("83b4"),alt:"tweets-list"}}):i("img",{attrs:{src:s("a581"),alt:"tweets-list-unselectd"}}),e._v(" 推文清單 ")])],1),i("div",{class:["navbar-item","page-item",{active:"users-page"===e.currentPage}],on:{click:function(t){return e.switchCurrentDisply("users-page")}}},[i("router-link",{attrs:{to:"/admin/users"}},["users-page"===e.currentPage?i("img",{attrs:{src:s("b5f1"),alt:"users-cards"}}):i("img",{attrs:{src:s("6379"),alt:"users-unselected"}}),e._v(" 使用者列表 ")])],1)]],2)]),"admin"!==e.currentUser.role?i("button",{staticClass:"show-tweet-modal",on:{click:e.showCreateModal}},[e._v(" 推文 ")]):e._e()]),i("div",{staticClass:"logout",on:{click:e.logout}},[i("img",{attrs:{src:s("e4d4"),alt:"logout"}}),i("span",{staticClass:"cursor-pointer"},[e._v("登出")])])])}),c=[],o=s("5530"),u=s("2f62"),l=s("2fa3"),d={name:"Navbar",data:function(){return{currentPage:""}},computed:Object(o["a"])({},Object(u["b"])(["currentUser"])),methods:{showCreateModal:function(){this.$emit("show-create-modal")},logout:function(){l["a"].fire({icon:"success",title:"已登出"}),this.$store.commit("revokeAuthentication"),this.$router.push("/login")},switchCurrentDisply:function(e){switch(e){case"main":this.currentPage="main";break;case"profile":this.currentPage="profile";break;case"setting":this.currentPage="setting";break;case"tweets":this.currentPage="tweets";break;case"users-page":this.currentPage="users-page";break}},redirectMainPage:function(e){"admin"===e?this.$router.push({name:"admin-tweets"}):this.$router.push({name:"main"})}}},g=d,m=(s("ec28"),s("2877")),p=Object(m["a"])(g,n,c,!1,null,"20421781",null),f=p.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tweet-create-modal"},[i("div",{staticClass:"modal-container"},[i("div",{staticClass:"modal-box"},[i("div",{staticClass:"modal-cancel"},[i("img",{staticClass:"cancel-icon",attrs:{src:s("8d18"),alt:"cancel"},on:{click:e.handleCloseBtnClicked}})]),i("div",{staticClass:"tweet-create-container"},[i("div",{staticClass:"profile-image"},[i("img",{staticClass:"user-img",attrs:{src:e._f("emptyImage")(this.currentUser.avatar),alt:"avatar"}})]),i("form",{staticClass:"tweet-input"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"tweet-input-content scrollbar",class:{checked:e.checked},attrs:{name:"input-area",id:"",cols:"30",rows:"10",placeholder:"有什麼新鮮事？"},domProps:{value:e.description},on:{keyup:e.checkedMsg,input:function(t){t.target.composing||(e.description=t.target.value)}}}),i("span",{directives:[{name:"show",rawName:"v-show",value:e.checked,expression:"checked"}],staticClass:"invalid-feedback"},[e._v("字數不可超過 140 字")]),i("button",{staticClass:"tweet-create-btn",attrs:{type:"submit",disabled:e.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit()}}},[e._v(" 推文 ")])])])])])])},v=[],b=s("2708"),w={mixins:[b["a"]],props:{newDescription:{type:String,required:!0},checked:{type:Boolean,required:!0},isProcessing:{type:Boolean,required:!0}},computed:Object(o["a"])({},Object(u["b"])(["currentUser"])),data:function(){return{description:""}},methods:{handleCloseBtnClicked:function(){this.$emit("close-btn-clicked")},handleSubmit:function(){this.$emit("afterSubmit",this.description)},checkedMsg:function(){var e={description:this.description};this.$emit("checkedMsg",e)}}},k=w,C=(s("fb69"),Object(m["a"])(k,h,v,!1,null,"d80210fa",null)),P=C.exports,_=s("6783"),x={name:"Main",components:{Navbar:f,NewPostModal:P},data:function(){return{isEditingCreateModal:!1,checked:!1,isProcessing:!1}},methods:{toggleCreateTweetModal:function(){this.isEditingCreateModal=!this.isEditingCreateModal},createNewTweet:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(s.prev=0,t.isProcessing=!0,0!==e.length){s.next=5;break}return l["a"].fire({icon:"warning",title:"內文不能留白！"}),s.abrupt("return");case 5:if(!(e.length>140)){s.next=8;break}return l["a"].fire({icon:"warning",title:"推文只限140個字數內！"}),s.abrupt("return");case 8:return s.next=10,_["a"].postTweet({description:e});case 10:if(i=s.sent,t.$router.push({name:"main"}),200===i.status){s.next=14;break}throw new Error(i.statusText);case 14:l["a"].fire({icon:"success",title:"成功新增推文"}),t.toggleCreateTweetModal(),s.next=22;break;case 18:s.prev=18,s.t0=s["catch"](0),t.isProcessing=!1,l["a"].fire({icon:"error",title:"無法新增推文，請稍後再試"});case 22:case"end":return s.stop()}}),s,null,[[0,18]])})))()},checkedMsg:function(e){var t=e.description;t.length>140?this.checked=!0:t.length<141&&(this.checked=!1)}}},M=x,y=(s("8934"),Object(m["a"])(M,i,r,!1,null,"c1c0b5fe",null));t["default"]=y.exports},d545:function(e,t,s){},e4d4:function(e,t,s){e.exports=s.p+"img/Vector_logout-icon.b4d62715.svg"},ec28:function(e,t,s){"use strict";s("6ecc")},fadf:function(e,t,s){e.exports=s.p+"img/Vector_cogsetting-icon.2ff65de4.svg"},fb69:function(e,t,s){"use strict";s("d545")}}]);
//# sourceMappingURL=chunk-600cbe67.6ad6a2f5.js.map