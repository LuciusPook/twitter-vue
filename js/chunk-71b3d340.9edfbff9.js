(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71b3d340"],{"90cc":function(t,e,s){t.exports=s.p+"img/Vector_close02-icon.b5bfdf04.svg"},b73c:function(t,e,s){"use strict";s("bf71")},be6c:function(t,e,s){"use strict";var n=s("2fa3");e["a"]={signIn:function(t){var e=t.account,s=t.password;return n["b"].post("/admin/signin",{account:e,password:s})},getUsers:function(){return n["b"].get("/admin/users")},getTweets:function(){return n["b"].get("/admin/tweets")},deleteTweet:function(t){var e=t.tweetId;return n["b"].delete("/admin/tweets/".concat(e))}}},bf71:function(t,e,s){},fa6a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container scrollbar"},[t.isLoading?n("Spinner"):t._e(),n("div",{staticClass:"admin_tweets"},[n("div",{staticClass:"admin_tweets-container"},[t._m(0),n("div",{staticClass:"users-container"},t._l(t.admintweets,(function(e){return n("div",{key:e.id,staticClass:"users_list"},[n("div",{staticClass:"users_list-image"},[n("img",{staticClass:"users-img",attrs:{src:t._f("emptyImage")(e.UserAvatar),alt:"avatar"}})]),n("div",{staticClass:"users_list-tweet"},[n("div",{staticClass:"users_list-tweet-info"},[n("router-link",{staticClass:"user-name-link",attrs:{to:{params:{id:e.id}}}},[n("div",{staticClass:"user-name"},[t._v(t._s(e.UserName))])]),n("router-link",{staticClass:"user-info-link",attrs:{to:{params:{id:e.userId}}}},[n("div",{staticClass:"user-account"},[t._v("@"+t._s(e.UserAccount))]),n("span"),n("div",{staticClass:"create-time"},[t._v(" "+t._s(t._f("timeTransForm")(e.createdAt))+" ")])])],1),n("div",{staticClass:"text-content"},[t._v(" "+t._s(e.description)+" ")])]),n("div",{staticClass:"delete"},[n("div",{staticClass:"delete-container cursor-pointer",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(e.id)}}},[n("img",{staticClass:"delete-icon",attrs:{src:s("90cc"),alt:""}})])])])})),0)])])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin_tweets-title"},[s("p",[t._v("推文清單")])])}],i=s("1da1"),r=(s("4de4"),s("d3b7"),s("96cf"),s("2708")),c=s("be6c"),o=s("2fa3"),u=s("2375"),d={name:"tweets",mixins:[r["c"],r["a"]],components:{Spinner:u["a"]},data:function(){return{currentPage:"tweets",admintweets:[],isLoading:!0}},beforeRouteUpdate:function(t,e,s){var n=t.params.id;this.fetchAdminTweets(n),s()},created:function(){this.fetchAdminTweets()},methods:{fetchAdminTweets:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,c["a"].getTweets();case 4:s=e.sent,n=s.data,t.admintweets=n.tweets,t.isLoading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),t.isLoading=!1,o["a"].fire({icon:"error",title:"無法取得推文資料，請稍後再試"});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteTweet:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.isLoading=!0,s.prev=1,s.next=4,c["a"].deleteTweet({tweetId:t});case 4:if(n=s.sent,200===n.status){s.next=7;break}throw new Error(n.statusText);case 7:e.admintweets=e.admintweets.filter((function(e){return e.id!==t})),e.isLoading=!1,o["a"].fire({icon:"success",title:"成功刪除推文"}),s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](1),e.isLoading=!1,o["a"].fire({icon:"error",title:"無法刪除推文，請稍後再試"});case 16:case"end":return s.stop()}}),s,null,[[1,12]])})))()}}},l=d,f=(s("b73c"),s("2877")),m=Object(f["a"])(l,n,a,!1,null,"b8cc55c0",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-71b3d340.9edfbff9.js.map