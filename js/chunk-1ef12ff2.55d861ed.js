(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ef12ff2"],{"1c4c":function(t,e,s){"use strict";s("fe15")},"7b32":function(t,e,s){"use strict";s("a98f")},a98f:function(t,e,s){},f4ef:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"twitter"},[s("router-view"),s("PopularList")],1)},a=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popular"},[s("div",{staticClass:"popular-items"},[s("h3",[t._v("Popular")]),s("div",{staticClass:"popular-container"},t._l(t.topUsers,(function(e){return s("div",{key:e.id,staticClass:"popular-list"},[s("div",{staticClass:"popular-info"},[s("div",{staticClass:"avatar"},[s("router-link",{attrs:{to:{name:"user",params:{id:e.id}}}},[s("img",{attrs:{src:t._f("emptyImage")(e.avatar),alt:"avatar"}})])],1),s("div",{staticClass:"user-info"},[s("router-link",{staticClass:"popular-name",attrs:{to:{name:"user",params:{id:e.id}}}},[t._v(" "+t._s(e.name)+" ")]),s("router-link",{staticClass:"popular-account",attrs:{to:{name:"user",params:{id:e.id}}}},[t._v(" @"+t._s(e.account)+" ")])],1)]),s("div",{staticClass:"button"},[e.isFollowed&&e.id!==t.currentUser.id?s("button",{staticClass:"unfollow-btn",attrs:{type:"button",name:e.id,disabled:t.isProcessing},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.deleteFollow(e.id)}}},[t._v(" 正在跟隨 ")]):t._e(),e.isFollowed||e.id===t.currentUser.id?t._e():s("button",{staticClass:"follow-btn",attrs:{type:"button",disabled:t.isProcessing},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.addFollow(e.id)}}},[t._v(" 跟隨 ")])])])})),0)])])},o=[],i=s("2909"),c=s("1da1"),l=s("5530"),u=(s("d81d"),s("96cf"),s("4cce")),p=s("2fa3"),d=s("2708"),f=s("2f62"),w={mixins:[d["a"]],data:function(){return{topUsers:[],isProcessing:!1}},computed:Object(l["a"])({},Object(f["b"])(["currentUser","isAuthenticated","followBtnClickedStatus"])),created:function(){this.fetchTopUsers()},watch:{followBtnClickedStatus:function(){this.fetchTopUsers()}},methods:{fetchTopUsers:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].getTopUsers();case 3:if(s=e.sent,200===s.status){e.next=6;break}throw new Error(s.statusText);case 6:t.topUsers=Object(i["a"])(s.data),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("error",e.t0),p["a"].fire({icon:"error",title:"無法取得人氣使用者名單"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},addFollow:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var r,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,u["a"].followship.addFollowing({userId:t});case 4:if(r=s.sent,a=r.data,"error"!==a.status){s.next=8;break}throw new Error(a.message);case 8:e.topUsers.map((function(s){s.id===t&&(s.isFollowed=!0,e.isFollowed=!0)})),p["a"].fire({icon:"success",title:"跟隨成功"}),e.isProcessing=!1,e.$store.commit("toggleFollowClickStatus"),s.next=18;break;case 14:s.prev=14,s.t0=s["catch"](0),e.isProcessing=!1,p["a"].fire({icon:"error",title:"無法跟隨，請稍後再試"});case 18:case"end":return s.stop()}}),s,null,[[0,14]])})))()},deleteFollow:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,u["a"].followship.deleteFollowing({userId:t});case 4:if(r=s.sent,200===r.status){s.next=7;break}throw new Error(r.statusText);case 7:e.topUsers.map((function(s){s.id===t&&(s.isFollowed=!1,e.isFollowed=!1)})),p["a"].fire({icon:"success",title:"成功取消跟隨"}),e.isProcessing=!1,e.$store.commit("toggleFollowClickStatus"),s.next=18;break;case 13:s.prev=13,s.t0=s["catch"](0),console.log(s.t0),e.isProcessing=!1,p["a"].fire({icon:"error",title:"無法取消跟隨，請稍後再試"});case 18:case"end":return s.stop()}}),s,null,[[0,13]])})))()}}},v=w,m=(s("1c4c"),s("2877")),h=Object(m["a"])(v,n,o,!1,null,"42b25465",null),b=h.exports,g={components:{PopularList:b}},k=g,x=(s("7b32"),Object(m["a"])(k,r,a,!1,null,"f05e2432",null));e["default"]=x.exports},fe15:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1ef12ff2.55d861ed.js.map